<div class="container-fluid">
    <h4 ng-hide="vm.figures.length" class="text-center">NO DATA IS AVAILABLE</h4>

    <div ng-repeat="fig in vm.figures" ng-init="tmpFig = vm.copy(fig)">
        <div class="row">
            <div class="col-xs-4">
                <a ng-click="vm.opened = vm.opened === $index ? -1 : $index" class="clickable custom-link">
                    <img class="thumbnail" ng-src="{{tmpFig.URL}}">
                </a>
            </div>
            <div class="col-xs-8">
                <div class="caption" ng-bind="tmpFig.Caption"></div>
                <small class="help-block"> IN <span ng-bind="tmpFig.FoundInCollectionsCounter"></span> COLLECTIONS</small>
                <button class="btn btn-link btn-xs" ng-click="vm.opened = vm.opened === $index ? -1 : $index">
                    <span class="glyphicon" ng-class="vm.opened === $index ? 'glyphicon-minus' : 'glyphicon-plus'"></span>
                    <span ng-bind="vm.opened === $index ? 'hide' : 'show'"></span> details
                </button>
            </div>
        </div>
        <div class="row" ng-show="vm.opened === $index">
            <div class="container-fluid">
                <form name="editFigure" ng-init="disabled = tmpFig.userID === vm.userInfo.ID" novalidate>
                    <div class="form-group">
                        <label for="edit-figure-url">URL</label>
                        <input id="edit-figure-url" type="text" class="form-control" ng-model="tmpFig.URL" readonly>
                    </div>
                    <div class="form-group">
                        <label for="edit-figure-caption">Caption</label>
                        <textarea id="edit-figure-caption" ng-disabled="disabled" class="form-control" ng-model="tmpFig.Caption"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-figure-legend">Legend</label>
                        <input id="edit-figure-legend" ng-disabled="disabled" type="text" class="form-control" ng-model="tmpFig.Legend">
                    </div>
                    <div class="form-group">
                        <label for="edit-figure-features">Features</label>
                        <input id="edit-figure-features" ng-disabled="disabled" type="text" class="form-control" ng-model="tmpFig.Features">
                    </div>
                    <div class="form-group">
                        <label for="edit-figure-authors">Article authors</label>
                        <input id="edit-figure-authors" ng-disabled="disabled" type="text" class="form-control" ng-model="tmpFig.Authors">
                    </div>
                    <div class="form-group">
                        <label for="edit-figure-doi">Article DOI</label>
                        <input id="edit-figure-doi" ng-disabled="disabled" type="text" class="form-control" ng-model="tmpFig.DOI">
                    </div>
                    <!--
                    <div class="form-group">
                        <label for="select-collection">My collections</label>
                        <select id="select-collection" class="form-control" ng-options="collection.Metapublication.ID as collection.Metapublication.Title for collection in vm.collections" ng-model="tmpFig.MetapublicationID">
                        </select>
                    </div>
                    -->
                    <p class="text-right">
                        <a ng-disabled="editFigure.$pristine" class="btn btn-default" ng-click="editFigure.$setPristine(); tmpFig = vm.copy(fig)">Cancel</a>
                        <button ng-disabled="editFigure.$pristine || editFigure.$invalid || editFigure.$submitted" class="btn btn-primary" ng-click="vm.save($index, tmpFig)">Save</button>
                    </p>
                </form>
            </div>
        </div>
        <hr>
    </div>
</div>